<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fuel for Life</title>
<style>
  body {
    margin: 0;
    font-family: 'Roboto', 'Segoe UI', sans-serif;
    background: #1e1e2f;
    height: 80vh;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #fff;
  }
  .game-container {
    width: 100%;
    max-width: 360px;
    height: 100%;
    max-height: 640px;
    background: #1e1e2f;
    border-radius: 16px;
    display: flex;
    flex-direction: column;
    padding: 15px;
    box-sizing: border-box;
    position: relative;
  }
  .top-bar { display: flex; justify-content: space-between; font-size: 16px; font-weight: 500; margin-bottom: 12px; }
  .metric { display: flex; align-items: center; gap: 5px; }
  .current-meal { text-align: center; font-size: 20px; font-weight: 600; margin-top: 10px; margin-bottom: 15px; color: #ffcc00; }
  .meter-container { margin-bottom: 12px; }
  .meter-label { font-size: 13px; margin-bottom: 3px; color: #ccc; display: flex; align-items: center; gap:5px; }
  .meter { width: 100%; height: 18px; background: #333; border-radius: 8px; overflow: hidden; position: relative; }
  .meter-fill { height: 100%; width: 50%; transition: width 0.3s, background-color 0.3s; border-radius: 8px; position: absolute; left:0; top:0; }
  .meters-grid { display: flex; justify-content: space-between; margin-bottom: 15px; }
  .small-meter { width: 48%; }
  .meal-options { display: flex; flex-direction: column; gap: 10px; margin-bottom: 10px; }

  .meal-btn {
    padding: 12px;
    background: #2c2c3e;
    border: none;
    border-radius: 12px;
    font-size: 15px;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    box-shadow: 0 2px 6px rgba(0,0,0,0.5);
    transition: 0.2s;
    color: #fff;
    text-align: center;
  }
  .meal-btn:hover { background: #3d3d55; transform: translateY(-2px); }
  .meal-emoji { font-size: 36px; margin-bottom: 5px; }
  .meal-title { font-weight: bold; margin-bottom: 5px; color: #ffcc00; font-size: 16px; }
  .nutrients { font-size: 18px; display: flex; gap: 8px; justify-content: center; margin-top: 5px; color: #bbb; }

  .modal {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.85);
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    color: #fff;
    font-size: 18px;
    text-align: center;
    padding: 20px;
    display: none;
    z-index: 100;
  }
  .modal h2 { font-size: 24px; margin-bottom: 15px; color: #ff5555; }

  #game-over-btn {
  padding: 12px 24px;
  font-size: 18px;
  border-radius: 12px;
  border: none;
  background: #ffcc00;
  color: #1e1e2f;
  font-weight: bold;
  cursor: pointer;
  transition: 0.2s;
  margin-top: 52px; 
}

  #game-over-btn:hover { background: #ffd633; }

  .splash-screen {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: #1e1e2f;
    border-radius: 16px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 20px;
    z-index: 10;
    color: #fff;
    font-size: 18px;
    text-align: center;
    padding: 20px;
  }
  .splash-screen h1 { font-size: 32px; color: #ffcc00; margin-bottom: 10px; }
  .splash-screen button {
    padding: 12px 24px;
    font-size: 18px;
    border-radius: 12px;
    border: none;
    background: #ffcc00;
    color: #1e1e2f;
    font-weight: bold;
    cursor: pointer;
    transition: 0.2s;
  }
  .splash-screen button:hover { background: #ffd633; }
  .splash-screen a { color: #ffd633; text-decoration: underline; cursor: pointer; font-size: 16px; }

  .instructions-screen {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: #1e1e2f;
    border-radius: 16px;
    z-index: 11;
    color: #fff;
    display: flex;
    flex-direction: column;
    padding: 20px;
    box-sizing: border-box;
    overflow-y: auto;
    font-size: 14px;
  }
  .instructions-screen h2 { font-size: 26px; color: #ffcc00; margin-bottom: 10px; text-align: center; }
  .instructions-screen h3 { font-size: 18px; color: #ffd633; margin-top: 15px; margin-bottom: 5px; }
  .instructions-screen p { margin-bottom: 12px; line-height: 1.6; color: #ccc; }
  .instructions-screen ul { margin-left: 15px; line-height: 1.6; margin-bottom: 12px; }
  .instructions-screen li { margin-bottom: 6px; }
  .instructions-screen .back-btn {
  padding: 12px 24px;
  font-size: 18px;
  border-radius: 12px;
  border: none;
  background: #ffcc00;  /* Same as main buttons */
  color: #1e1e2f;       /* Same as main buttons */
  font-weight: bold;
  cursor: pointer;
  transition: 0.2s;
  align-self: center;
  margin-top: 15px;
}

.instructions-screen .back-btn:hover {
  background: #ffd633;   /* Hover color like other buttons */
  transform: translateY(-2px);  /* Same hover lift effect as meals */
}

  .instructions-screen::-webkit-scrollbar { width: 8px; }
  .instructions-screen::-webkit-scrollbar-track { background: #1e1e2f; border-radius: 4px; }
  .instructions-screen::-webkit-scrollbar-thumb { background: #ffd633; border-radius: 4px; }
  .instructions-screen::-webkit-scrollbar-thumb:hover { background: #ffcc00; }
#notification-modal {
  background: rgba(0,0,0,0.85);
}

#notification-title {
  font-size: 22px;
  color: #ffd633;
  margin-bottom: 10px;
}

#notification-btn {
  padding: 10px 20px;
  font-size: 16px;
  border-radius: 10px;
  border: none;
  background: #ffcc00;
  color: #1e1e2f;
  font-weight: bold;
  cursor: pointer;
  margin-top: 20px;
  transition: 0.2s;
}
#notification-btn:hover {
  background: #ffd633;
}


  /* Hide main game UI initially */
  #game-ui { display: none; }
</style>
</head>
<body>

<div class="game-container">
  <audio id="meal-sound" src="meal.mp3"></audio>
  <audio id="happy-sound" src="happychoice.mp3"></audio>
  <audio id="sad-sound" src="sadchoice.mp3"></audio>

  <!-- Splash screen -->
  <div class="splash-screen" id="splash-screen">
    <h1>Fuel for Life</h1>
    <p>Balance your nutrients, keep your body healthy, and survive as long as you can!</p>
    <button onclick="startGame()">Start Game</button>
    <a onclick="showInstructions()">Instructions</a>
  </div>

  <!-- Instructions screen -->


 
 <div class="instructions-screen" id="instructions-screen" style="display:none;">
  <h1 style="font-size:32px; color:#ffcc00; margin-bottom:20px; text-align:center;">Fuel for Life</h1>
  <p style="font-size:16px; line-height:1.6; color:#ccc;">
    Welcome, survivor! Your mission is to thrive by carefully managing your <strong>nutrients</strong>, <strong>fullness</strong>, and <strong>pleasure</strong>, while keeping track of your 💰 <em>resources</em>. Every meal choice matters. Plan strategically to survive as long as possible.
  </p>

  <h2 style="font-size:24px; color:#ffd633; margin-top:25px;">📋 Your Meters</h2>

  <p style="font-size:16px; line-height:1.5; color:#ccc;">
    <strong>🍽️ Fullness:</strong> Represents how satiated you are. Too low, and you risk starvation. Too high, and repeated overeating can lead to food poisoning.<br><br>
    <strong>😋 Pleasure:</strong> Measures your satisfaction from meals. A low pleasure level affects motivation and can end your journey.<br><br>
    <strong>🥖 Carbs:</strong> Your energy source. Overconsumption converts to <em>fat 🧈</em>, while too little drains your energy.<br><br>
    <strong>🍗 Protein:</strong> Essential for muscle and overall health. Depletion can lead to body breakdown.<br><br>
    <strong>🧈 Fat:</strong> Necessary for energy storage, but excessive levels cause health collapse.<br><br>
    <strong>🥦 Vitamins:</strong> Required for general well-being. Deficiency can make you ill.<br><br>
    <strong>💰 Money:</strong> Essential for buying meals. Running out prevents you from eating and ends the game.
  </p>

  <h2 style="font-size:24px; color:#ffd633; margin-top:25px;">🍽️ Meals</h2>

  <p style="font-size:16px; line-height:1.5; color:#ccc;">
    Meals affect your meters in different ways. Choose carefully to maintain balance and maximize survival:
  </p>

  <p style="font-size:16px; line-height:1.5; color:#ccc;">
    <strong>🥣 Oatmeal<br></strong> Boosts carbs 🥖, protein 🍗, and vitamins 🥦. Moderate fullness, mild pleasure.<br><br>
    <strong>🍔 Burger<br></strong> Increases carbs 🥖, protein 🍗, fat 🧈, and pleasure 😋, but lowers vitamins 🥦.<br><br>
    <strong>🥗 Salad<br></strong> High in vitamins 🥦 and fullness, reduces protein 🍗 and fat 🧈, lower pleasure.<br><br>
    <strong>🍕 Pizza<br></strong> Rich in carbs 🥖 and fat 🧈, some protein 🍗, high pleasure 😋.<br><br>
    <strong>🍗 Grilled Chicken<br></strong> Protein 🍗 boost, moderate fat 🧈, balanced fullness.<br><br>
    <strong>🍟 Fries<br></strong> High carbs 🥖 and fat 🧈, fun 😋, low protein 🍗 and vitamins 🥦.<br><br>
    <strong>🍎/🍌 Fruits<br></strong> Vitamins 🥦, low fullness, lower pleasure.<br><br>
    <strong>🥛 Yogurt<br></strong> Small boost to carbs 🥖 and protein 🍗, minor pleasure.<br><br>
    <strong>🍫 Candy Bar / 🥤 Soft Drink<br></strong> Quick pleasure 😋, adds some carbs 🥖, may reduce vitamins 🥦 and protein 🍗.
  </p>

  <h2 style="font-size:24px; color:#ffd633; margin-top:25px;">⚠️ Failure Conditions</h2>

  <p style="font-size:16px; line-height:1.5; color:#ccc;">
    <strong>Fullness extremes:</strong> Starvation or repeated overeating can end your journey.<br>
    <strong>Pleasure:</strong> Loss of enjoyment reduces motivation to continue.<br>
    <strong>Protein & Vitamins:</strong> Deficiency leads to physical breakdown or illness.<br>
    <strong>Fat:</strong> Excessive levels threaten overall health.<br>
    <strong>Money:</strong> Without sufficient funds, you cannot purchase meals and the game ends.
  </p>

  <h2 style="font-size:24px; color:#ffd633; margin-top:25px;">💡 Strategy Tips</h2>

  <p style="font-size:16px; line-height:1.5; color:#ccc;">
    Balance meals to maintain all meters within safe ranges. <br>Monitor your 💰 resources carefully and plan around weekly allowances. <br>Rotate meals to avoid nutrient depletion, and remember: high pleasure foods 😋 can be tempting but may unbalance fullness 🧍‍♂️. <br>Always watch your meters, as neglecting any aspect can accelerate failure. <br>Plan your nutrition wisely, as excess carbs 🥖 automatically convert to fat 🧈.
  </p>

  <p style="font-size:16px; line-height:1.5; color:#ccc; margin-top:20px;">
    Survive as long as possible, and see how many days you can thrive! Every choice matters.
  </p>
  
  <button class="back-btn" onclick="backToSplash()">Back</button>
</div>




  <!-- Main game UI -->
  <div id="game-ui">
    <div class="top-bar">
      <div class="metric" id="weight-display">🧍🏻‍♂️ 70kg</div>
      <div class="metric" id="money-display">💰 $200</div>
    </div>

    <div class="meter-container">
      <div class="meter-label">🍽️ Fullness</div>
      <div class="meter"><div class="meter-fill" id="fullness-fill"></div></div>
    </div>

    <div class="meter-container">
      <div class="meter-label">😋 Pleasure</div>
      <div class="meter"><div class="meter-fill" id="pleasure-fill"></div></div>
    </div>

    <div class="meters-grid">
      <div class="small-meter">
        <div class="meter-label">🥖 Carbs</div>
        <div class="meter"><div class="meter-fill" id="carbs-fill"></div></div>
      </div>
      <div class="small-meter">
        <div class="meter-label">🍗 Protein</div>
        <div class="meter"><div class="meter-fill" id="protein-fill"></div></div>
      </div>
    </div>

    <div class="meters-grid">
      <div class="small-meter">
        <div class="meter-label">🧈 Fat</div>
        <div class="meter"><div class="meter-fill" id="fat-fill"></div></div>
      </div>
      <div class="small-meter">
        <div class="meter-label">🥦 Vitamins</div>
        <div class="meter"><div class="meter-fill" id="vit-fill"></div></div>
      </div>
    </div>

    <div class="current-meal" id="current-meal">Day 1 - Breakfast</div>
    <div class="meal-options" id="meal-options"></div>
  </div>

<!-- Game Over Modal -->
<div class="modal" id="game-over-modal">
  <h2 id="game-over-msg">Game Over!</h2>
  <p id="days-survived"></p>
  <p id="high-score"></p>
  <button id="game-over-btn" onclick="backToMainMenu()">Back to Main Menu</button>
</div>

<!-- Notification Modal -->
<div class="modal" id="notification-modal">
  <h2 id="notification-title">Alert!</h2>
  <p id="notification-msg"></p>
  <button id="notification-btn" onclick="closeNotification()">OK</button>
</div>


<script>
const foodCatalog = [
  {name:"Oatmeal", emoji:"🥣", effects:{carbs:10, protein:2, fat:1, vit:2, fullness:15, pleasure:-10}, nutrients:["carbs","protein","vit"], cost:10},
  {name:"Burger", emoji:"🍔", effects:{carbs:15, protein:5, fat:7, vit:-7, fullness:20, pleasure:10}, nutrients:["carbs","protein","fat"], cost:15},
  {name:"Salad", emoji:"🥗", effects:{carbs:5, protein:-7, fat:-7, vit:4, fullness:17, pleasure:-15}, nutrients:["carbs","vit"], cost:8},
  {name:"Pizza", emoji:"🍕", effects:{carbs:20, protein:1, fat:9, vit:-4, fullness:25, pleasure:12}, nutrients:["carbs","protein","fat"], cost:17},
  {name:"Grilled Chicken", emoji:"🍗", effects:{protein:8, fat:3, vit:-4, fullness:18, pleasure:5}, nutrients:["protein","fat"], cost:12},
  {name:"Fries", emoji:"🍟", effects:{carbs:15, protein:-10, fat:5, vit:-6, fullness:15, pleasure:10}, nutrients:["carbs","fat"], cost:7},
  {name:"Apple", emoji:"🍎", effects:{carbs:8, protein:-3, fat:-5, vit:4, fullness:3, pleasure:-10}, nutrients:["carbs","vit"], cost:3},
  {name:"Banana", emoji:"🍌", effects:{carbs:10, protein:-3, fat:-4, vit:4, fullness:2, pleasure:-10}, nutrients:["carbs","vit"], cost:2},
  {name:"Yogurt", emoji:"🥛", effects:{carbs:5, protein:4, vit:4, fat:1, fullness:4, pleasure:3}, nutrients:["carbs","protein", "vit"], cost:4},
  {name:"Candy Bar", emoji:"🍫", effects:{carbs:12, protein:-7, fat:3, vit:-3, fullness:5, pleasure:15}, nutrients:["carbs", "fat"], cost:3},
  {name:"Soft Drink", emoji:"🥤", effects:{carbs:15, protein:-7, fat:0, vit:-2, fullness:2, pleasure:10}, nutrients:["carbs"], cost:3}
];

let fullness = 50, pleasure = 50, carbs = 50, protein = 50, fat = 25, vit = 50, money = 230;
let day = 1, mealsEaten = 0;
let consecutiveFullnessMax = 0;
let highScore = 0; // 
const mealTitles = ["Breakfast","Lunch","Dinner"];

const mealSound = document.getElementById('meal-sound');
const happySound = document.getElementById('happy-sound');
const sadSound = document.getElementById('sad-sound');

function startGame() {
  document.getElementById('splash-screen').style.display = 'none';
  document.getElementById('instructions-screen').style.display = 'none';
  document.getElementById('game-ui').style.display = 'block';
  updateMeters();
  renderMeals();
}

function showInstructions() {
  document.getElementById('splash-screen').style.display = 'none';
  document.getElementById('instructions-screen').style.display = 'flex';
}

function backToSplash() {
  document.getElementById('instructions-screen').style.display = 'none';
  document.getElementById('splash-screen').style.display = 'flex';
}

function updateWeight() {
  const weight = 40 + (fat / 100) * (160 - 40);
  document.getElementById('weight-display').textContent = `🧍🏻‍♂️ ${Math.round(weight)}kg`;
}

function updateMeters() {
  function meterColor(value, type) {
    if (type === 'fullness' || type === 'pleasure' || type === 'protein' || type === 'vit') {
      if (value < 35) return '#f44336';
      if (value < 70) return '#ff9800';
      return '#4caf50';
    } else if (type === 'fat') {
      if (value >= 100) return '#f44336';
      if (value > 40) return '#ff9800';
      return '#4caf50';
    } else if (type === 'carbs') {
      return value <= 80 ? '#4caf50' : '#f44336';
    }
    return '#7c4dff';
  }

  document.getElementById('fullness-fill').style.width = fullness + '%';
  document.getElementById('fullness-fill').style.backgroundColor = meterColor(fullness, 'fullness');
  document.getElementById('pleasure-fill').style.width = pleasure + '%';
  document.getElementById('pleasure-fill').style.backgroundColor = meterColor(pleasure, 'pleasure');
  document.getElementById('protein-fill').style.width = protein + '%';
  document.getElementById('protein-fill').style.backgroundColor = meterColor(protein, 'protein');
  document.getElementById('fat-fill').style.width = fat + '%';
  document.getElementById('fat-fill').style.backgroundColor = meterColor(fat, 'fat');
  document.getElementById('carbs-fill').style.width = carbs + '%';
  document.getElementById('carbs-fill').style.backgroundColor = meterColor(carbs, 'carbs');
  document.getElementById('vit-fill').style.width = vit + '%';
  document.getElementById('vit-fill').style.backgroundColor = meterColor(vit, 'vit');
  document.getElementById('money-display').textContent = `💰 $${money}`;
  updateWeight();
}

function getRandomMeals() {
  const options = [];
  const usedIndices = [];
  while (options.length < 3) {
    const idx = Math.floor(Math.random() * foodCatalog.length);
    if (!usedIndices.includes(idx)) {
      usedIndices.push(idx);
      options.push(foodCatalog[idx]);
    }
  }
  return options;
}

function renderMeals() {
  mealSound.play();
  const mealsDiv = document.getElementById('meal-options');
  mealsDiv.innerHTML = '';
  const options = getRandomMeals();
  const mealTitle = mealTitles[mealsEaten % 3];
  document.getElementById('current-meal').textContent = `Day ${day} - ${mealTitle}`;

  let affordable = false;

  options.forEach(food => {
    const btn = document.createElement('button');
    btn.className = 'meal-btn';

    const mainEmoji = food.emoji;

    const nutrientIcons = [];
    if(food.nutrients.includes("carbs")) nutrientIcons.push('🥖');
    if(food.nutrients.includes("protein")) nutrientIcons.push('🍗');
    if(food.nutrients.includes("fat")) nutrientIcons.push('🧈');
    if(food.nutrients.includes("vit")) nutrientIcons.push('🥦');

    btn.innerHTML = `<div class="meal-emoji">${mainEmoji}</div>
                     <div class="meal-title">${food.name} <span class="cost">$${food.cost}</span></div>
                     <div class="nutrients">${nutrientIcons.join(' ')}</div>`;

    if(money >= food.cost) {
      affordable = true;
      btn.onclick = () => eatMeal(food);
    } else {
      btn.disabled = true;
      btn.style.opacity = 0.5;
    }

    mealsDiv.appendChild(btn);
  });

  if(!affordable) showGameOver("You can't afford any meals!");
}

function eatMeal(food) {
  const old = {fullness, pleasure, carbs, protein, vit};

  if (food.effects.carbs) carbs += food.effects.carbs;
if (food.effects.protein) protein += food.effects.protein;
if (food.effects.fat) fat += food.effects.fat;
if (food.effects.vit) vit += food.effects.vit;

  fullness += food.effects.fullness - 12;
  pleasure += food.effects.pleasure;
  money -= food.cost;

  mealsEaten++;
  if(mealsEaten % 3 === 0) day++;

  if(mealsEaten % 21 === 0) {
    money += 150;
    showNotification("You received your weekly allowance of $150!");
  }

  if(fullness >= 100) consecutiveFullnessMax++;
  else consecutiveFullnessMax = 0;

  clampValues();
  playChoiceSound(old);
  checkGameOver();
  updateMeters();
  renderMeals();
}

function playChoiceSound(old) {
  const majorityDown = (
    (fullness < old.fullness ? 1 : 0) +
    (pleasure < old.pleasure ? 1 : 0) +
    (protein < old.protein ? 1 : 0) +
    (vit < old.vit ? 1 : 0) +
    (carbs > old.carbs ? 1 : 0)
  ) >= 3;

  if(majorityDown) sadSound.play();
  else happySound.play();
}

function clampValues() {
  if(carbs > 100) {
    carbs = 50;
    fat = Math.min(100, fat + 4);
    showNotification("🍞 Too many carbs! Your body converted them into 🧈 fat.");

  }

  fullness = Math.min(100, Math.max(0, fullness));
  pleasure = Math.min(100, Math.max(0, pleasure));
  carbs = Math.min(100, Math.max(0, carbs));
  protein = Math.min(100, Math.max(0, protein));
  fat = Math.min(100, Math.max(0, fat));
  vit = Math.min(100, Math.max(0, vit));
  money = Math.max(0, money);
}

function checkGameOver() {
  if(fullness === 0) 
    return showGameOver("You ran out of energy and starved. Try to keep your 🍽️ Fullness meter from dropping too low.");

  if(consecutiveFullnessMax >= 5) 
    return showGameOver("Your body couldn’t handle all that overeating. Watch your 🍽️ Fullness and pace your meals.");

  if(fullness === 100 && consecutiveFullnessMax < 5) 
    return showGameOver("That last meal was too much to handle. Keep an eye on your 🍽️ Fullness so you don’t max out.");

  if(pleasure === 0) 
    return showGameOver("Life felt too dull without tasty food. Mix in a few 😋 fun meals to stay motivated.");

  if(fat === 100) 
    return showGameOver("Your health gave out from too much 🧈 Fat. Balance indulgent foods with lighter choices.");

  if(protein === 0) 
    return showGameOver("Your body weakened without enough 🍗 Protein. Add more protein-rich meals to stay strong.");

  if(vit === 0) 
    return showGameOver("You got sick from a lack of 🥦 Vitamins. Don’t forget fruits and veggies to stay healthy.");

  const affordable = foodCatalog.some(f => f.cost <= money);
  if(!affordable) 
    return showGameOver("You ran out of 💰 and couldn’t buy food. Budget your meals so the money lasts longer.");
}


function showGameOver(msg) {
  document.getElementById('game-over-msg').textContent = msg;
  
  // Bold full "X days"
  document.getElementById('days-survived').innerHTML = 
    `You survived <strong>${day} day${day > 1 ? 's' : ''}</strong>!`;
  
  // Update high score
  if(day > highScore) {
    highScore = day;
  }
  document.getElementById('high-score').innerHTML = 
    `🏆 High Score: <strong>${highScore} day${highScore > 1 ? 's' : ''}</strong>`;

  document.getElementById('game-over-modal').style.display = 'flex';
}



function backToMainMenu() {
  document.getElementById('game-over-modal').style.display = 'none';
  document.getElementById('splash-screen').style.display = 'flex';
  document.getElementById('game-ui').style.display = 'none';
  fullness = 50; pleasure = 50; carbs = 50; protein = 50; fat = 25; vit = 50; money = 230;
  day = 1; mealsEaten = 0; consecutiveFullnessMax = 0;
  updateMeters();
}

function showNotification(msg) {
  document.getElementById('notification-msg').innerHTML = msg;
  document.getElementById('notification-modal').style.display = 'flex';
}

function closeNotification() {
  document.getElementById('notification-modal').style.display = 'none';
}


</script>

</body>
</html>
